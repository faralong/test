"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1297],{31297:(e,t,n)=>{n.r(t),n.d(t,{NerdModeComponent:()=>T,default:()=>E});var i=n(37876),o=n(14232),r=n(26875),a=n(33884),c=n(64320),d=n(71278),s=n(30069),l=n(70780),p=n(56047),u=n(99397),m=n(69592),x=n(59319),g=n(10025),h=n(62920),f=n(29359),v=n(98684),y=n(26212);let w=v.Ay.div.withConfig({componentId:"sc-594d3038-0"})(["position:relative;"]),j=v.Ay.div.withConfig({componentId:"sc-594d3038-1"})(["position:absolute;background:rgba(0,0,0,0.8);color:",";display:inline-block;left:50%;top:5px;transform:translateX(-50%);z-index:10;width:fit-content;padding:8px 16px;border:",";"],e=>{let{theme:t}=e;return t.colors.white},e=>{let{theme:t}=e;return t.border.base}),k=v.Ay.div.withConfig({componentId:"sc-594d3038-2"})(["position:absolute;z-index:20;max-width:459px;top:60px;background:rgba(0,0,0,0.8);box-shadow:",";border-radius:0 6px 0 6px;padding:12px 16px 15px;pointer-events:none;@media screen and (orientation:portrait) and (max-width:600px),(orientation:landscape) and (max-height:575.98px){transform:scale(.7);transform-origin:top left;}"],e=>{let{theme:t}=e;return t.shadow.big}),b=v.Ay.p.withConfig({componentId:"sc-594d3038-3"})(["letter-spacing:0.05em;font-weight:500;color:",";opacity:0.8;margin-bottom:8px;margin-top:5px;font-size:12px;line-height:15px;"],e=>{let{theme:t}=e;return t.colors.white}),C=v.Ay.div.withConfig({componentId:"sc-594d3038-4"})(["display:flex;flex-direction:row;"]),P=v.Ay.div.withConfig({componentId:"sc-594d3038-5"})(["display:flex;margin-left:auto;cursor:pointer;pointer-events:auto;span{margin-left:10px;}"]),A=v.Ay.div.withConfig({componentId:"sc-594d3038-6"})(["border-bottom:1px solid rgba(255,255,255,0.1);"]),R=v.Ay.div.withConfig({componentId:"sc-594d3038-7"})(["color:",";display:grid;margin-top:5px;grid-template-columns:111px 14px 302px;div:nth-child(2){margin:0px 4px;text-align:center;}p{font-size:11px;}"],e=>{let{theme:t}=e;return t.colors.white}),S=v.Ay.div.withConfig({componentId:"sc-594d3038-8"})(["display:flex;color:",";margin-top:8px;div:nth-child(2){margin:0px 4px;text-align:center;}"],e=>{let{theme:t}=e;return t.colors.white}),I=v.Ay.div.withConfig({componentId:"sc-594d3038-9"})(["color:",";display:grid;margin-top:8px;grid-template-columns:200px 200px;"],e=>{let{theme:t}=e;return t.colors.white}),N=(0,v.Ay)(y.JU).withConfig({componentId:"sc-594d3038-10"})(["> span:before{background-color:",";}> span{border-color:",";}"],e=>{let{theme:t}=e;return t.colors.white},e=>{let{theme:t}=e;return t.colors.white}),T=()=>{let{t:e}=(0,r.B)(),t=(0,c.wA)(),[n,v]=(0,o.useState)(["platform","appPackage","country","connectionState","ping","currentResolution","framesPerSecond","clientID","sessionID","buildVersion"]),y=(0,o.useContext)(m.A),T=(0,c.d4)(e=>e.play.peerConnectionState),E=(0,c.d4)(e=>e.play.peerConnection),M=(0,c.d4)(e=>e.play.isNerdMode),z=(0,c.d4)(e=>e.play.tpEnabled),B=d.A.getState(),D="",F="",L="",V="",{videoRef:_}=B.play;_&&_.current&&(F=_.current.offsetHeight.toString(),D=_.current.offsetWidth.toString());let H=f.Ay.countryCode||"-",W=["bitrate","codec","packets"],X=new Map([["bitrate","videoBitrate"],["codec","videoCodec"],["packets","videoPackets"]]),q=new Map([["bitrate","audioBitrate"],["codec","audioCodec"],["packets","audioPackets"]]),J=(0,p.el)(),[O,G]=(0,o.useState)(new Map([["platform","".concat(null==J?void 0:J.feDeviceType," ~ ").concat(null==J?void 0:J.feOsName)],["appPackage",y.packageName],["country",H],["connectionState",T||"NA"],["ping","0ms"],["currentResolution",""],["framesPerSecond","0"],["clientID",(0,p.qk)(h.kk8)],["sessionID",(0,p.Rm)(h.J0m)],["buildVersion","".concat(x.CU," ~ ").concat(x.mA)],["viewport",""],["devicePixelRatio",""],["frames",""],["videoBitrate",""],["videoCodec",""],["videoPackets",""],["audioBitrate",""],["audioCodec",""],["audioPackets",""]])),[U,K]=(0,o.useState)({}),[Q,Y]=(0,o.useState)(!1),[Z,$]=(0,o.useState)(0),ee=(0,o.useRef)(null),et=(0,c.d4)(e=>e.ads.inGameAd);function en(e){let t=parseInt(e,10);return t&&t>0?"".concat(parseInt((t/1e3).toString(),10)," kHz"):"0 kHz"}function ei(e){let t=parseInt(e,10);return t&&t>0?"".concat(parseFloat((t/1e3).toString()).toFixed(2)," kbps"):"0 kbps"}function eo(t){var n,i,o,r,a,c;let d=null==(i=null==(n=null==t?void 0:t.data)?void 0:n.connection)?void 0:i.currentRoundTripTime,s=null==(r=null==(o=t.data)?void 0:o.video)?void 0:r.inbound[0],l=null==(c=null==(a=t.data)?void 0:a.audio)?void 0:c.inbound[0],p=s.frameWidth&&s.frameHeight?"".concat(s.frameWidth," x ").concat(s.frameHeight):"",u=!!s.framesPerSecond&&s.framesPerSecond,m="".concat(s.mimeType||"NA","-").concat(en(s.clockRate||"0")),x="".concat(l.mimeType||"NA","-").concat(en(l.clockRate||"0")),g=s?ei(s.bitrate):ei("0"),h=l?ei(l.bitrate):ei("0"),f="".concat(s.packetsLost||"0"," ").concat(e("frameLost")," ").concat(s.packetsReceived||"0"),v="".concat(l.packetsLost||"0"," ").concat(e("frameLost")," ").concat(l.packetsReceived||"0");G(e=>{let t=new Map(e);return d&&t.set("ping","".concat(parseFloat((1e3*d).toString()).toFixed(2),"ms")),p?t.set("currentResolution",p):t.delete("currentResolution"),u?t.set("framesPerSecond",u):t.delete("framesPerSecond"),m?t.set("videoCodec",m):t.delete("videoCodec"),x?t.set("audioCodec",x):t.delete("audioCodec"),g?t.set("videoBitrate",g):t.delete("videoBitrate"),h?t.set("audioBitrate",h):t.delete("audioBitrate"),f?t.set("videoPackets",f):t.delete("videoPackets"),v?t.set("audioPackets",v):t.delete("audioPackets"),t})}return(0,o.useEffect)(()=>{if(M){if((0,g.Pq)("1"),E instanceof RTCPeerConnection){let e;U instanceof s.X?e=U:K(e=new s.X({getStatsInterval:1e3}));try{e.addPeer({pc:E,peerId:"1"}),e.on("stats",eo)}catch(e){(0,x.Ay)(e)}}}else U instanceof s.X&&(U.removePeer("1"),U.removeListener("stats",eo),(0,g.Pq)("0"));return()=>{U instanceof s.X&&(U.removePeer("1"),U.removeListener("stats",eo))}},[M]),(0,o.useEffect)(()=>{G(e=>(e.set("connectionState",T||"NA"),e.set("clientID",(0,p.qk)(h.kk8)||""),e.set("sessionID",(0,p.Rm)(h.J0m)||""),e))},[T]),(0,o.useEffect)(()=>{7===Z&&(v(e=>[...e,"viewport","devicePixelRatio","frames"]),ee.current=setInterval(()=>{!function(){if(_&&_.current){let t=_.current.getVideoPlaybackQuality();0!==t.totalVideoFrames&&Z>=7&&(L=t.totalVideoFrames.toString(),V=t.droppedVideoFrames.toString(),G(t=>{let n=new Map(t);return n.set("frames","".concat(V," ").concat(e("frameDrop")," ").concat(L)),n}))}}()},1e3),G(e=>(e.set("viewport","".concat(F," x ").concat(D)),e.set("devicePixelRatio",parseFloat(window.devicePixelRatio.toString()).toFixed(2)),e)))},[Z]),(0,i.jsxs)(w,{children:[Q&&(0,i.jsx)(j,{children:(0,i.jsx)(a.YC,{style:{margin:0},children:e("copiedToClipboard")})}),M&&(0,i.jsxs)(k,{style:et===h.tFK?{top:0}:{},children:[(0,i.jsxs)(C,{style:{color:"white"},children:[(0,i.jsx)(a.T6,{med:!0,style:{margin:0},children:e("nerdMode")}),(0,i.jsxs)(P,{children:[(0,i.jsx)(u.A,{name:"copy",onClick:()=>(function(){var t,n,i,o;return t=this,n=void 0,i=void 0,o=function*(){let t="";$(Z+1),O.forEach((n,i)=>{t+="".concat(e(i)," : ").concat(n,"\n")});try{yield navigator.clipboard.writeText(t),Y(!0),setTimeout(()=>{Y(!1)},2e3)}catch(e){}},new(i||(i=Promise))(function(e,r){function a(e){try{d(o.next(e))}catch(e){r(e)}}function c(e){try{d(o.throw(e))}catch(e){r(e)}}function d(t){var n;t.done?e(t.value):((n=t.value)instanceof i?n:new i(function(e){e(n)})).then(a,c)}d((o=o.apply(t,n||[])).next())})})(),size:18}),(0,i.jsx)(u.A,{name:"divider",size:18}),(0,i.jsx)(u.A,{id:"ng-nerd-close",name:"cross-thin",onClick:()=>void($(0),clearInterval(ee.current),G(e=>{let t=new Map(e);return t.delete("frames"),t.delete("viewport"),t.delete("devicePixelRatio"),t}),v(e=>{let t=e;return t.filter(e=>"frames"!==e&&"viewport"!==e&&"devicePixelRatio"!==e)}),t({type:l.A.START_CONNECTION,payload:{isNerdMode:!1}})),size:18})]})]}),(0,i.jsx)(b,{children:e("nerdModeDescription")}),(0,i.jsx)(A,{}),n.map(t=>{var n,o;return(0,i.jsxs)(R,{children:[(0,i.jsx)(a.Rj,{style:{textAlign:"right",margin:0,fontWeight:400},children:e(t)}),(0,i.jsx)("div",{children:":"}),(0,i.jsx)(a.Rj,{...(n="connectionState"===t,o=O.get(t),n?"connected"===o?{lightGreen:!0}:{red:!0}:{}),style:{letterSpacing:"0.05em",opacity:.8,margin:0},children:O.get(t)||""})]},t)}),(0,i.jsxs)("div",{style:{color:"white",display:"flex",justifyContent:"space-between",margin:"10px 0px 0"},children:[(0,i.jsx)(a.Rj,{style:{margin:0,fontSize:11,fontWeight:400},children:(0,i.jsx)("strong",{children:e("tp.toggle")})}),(0,i.jsxs)(N,{id:"ng-touch-points",style:{pointerEvents:"auto"},children:[(0,i.jsx)("input",{type:"checkbox",checked:z,onChange:()=>(e=>{(0,g.mJ)(e?"0":"1"),t({type:l.A.TP_ENABLED,payload:{tpEnabled:!e}})})(z)}),(0,i.jsx)("span",{})]})]}),Z>=7&&(0,i.jsxs)("div",{style:{marginTop:"8px"},children:[(0,i.jsx)(A,{}),(0,i.jsxs)(I,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(a.Rj,{style:{opacity:.8,margin:0},children:e("video")}),W.map(t=>(0,i.jsxs)(S,{children:[(0,i.jsx)(a.Rj,{style:{margin:0},children:e(t)})," ",(0,i.jsx)("div",{children:":"})," ",(0,i.jsx)(a.Rj,{style:{opacity:.8,margin:0},children:O.get(X.get(t)||"")})]}))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(a.Rj,{style:{opacity:.8,margin:0},children:e("audio")}),W.map(t=>(0,i.jsxs)(S,{children:[(0,i.jsx)(a.Rj,{style:{margin:0},children:e(t)})," ",(0,i.jsx)("div",{children:":"})," ",(0,i.jsx)(a.Rj,{style:{opacity:.8,margin:0},children:O.get(q.get(t)||"")})]}))]})]})]})]})]})},E=T}}]);
//# sourceMappingURL=1297.5ece136605c7692b.js.map